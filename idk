-- Existing Setup
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- GUI Setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "SpeedGUI"
screenGui.ResetOnSpawn = false

-- Toggle GUI Button (RGB on left middle)
local toggleButton = Instance.new("TextButton", screenGui)
toggleButton.Size = UDim2.new(0, 120, 0, 30)
toggleButton.Position = UDim2.new(0, 10, 0.5, -15)
toggleButton.BackgroundColor3 = Color3.fromHSV(0, 1, 1)
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.TextSize = 18
toggleButton.Text = "Toggle CoreX"

local hue = 0
task.spawn(function()
	while true do
		hue = (hue + 0.01) % 1
		toggleButton.BackgroundColor3 = Color3.fromHSV(hue, 1, 1)
		task.wait(0.03)
	end
end)

-- Toggle visibility for all main GUI frames
toggleButton.MouseButton1Click:Connect(function()
	for _, child in ipairs(screenGui:GetChildren()) do
		if child:IsA("Frame") and child ~= toggleButton then
			child.Visible = not child.Visible
		end
	end
end)

-- RGB FPS & Ping Counter (No background)
local statsLabel = Instance.new("TextLabel", screenGui)
statsLabel.Size = UDim2.new(0, 200, 0, 20)
statsLabel.Position = UDim2.new(0, 10, 0.5, 20)
statsLabel.BackgroundTransparency = 1
statsLabel.TextColor3 = Color3.fromHSV(0, 1, 1)
statsLabel.Font = Enum.Font.SourceSansBold
statsLabel.TextSize = 16
statsLabel.Text = "FPS: ... | Ping: ..."
statsLabel.TextXAlignment = Enum.TextXAlignment.Left
statsLabel.ZIndex = 1000

task.spawn(function()
	local RunService = game:GetService("RunService")
	local Stats = game:GetService("Stats")
	local frameCount = 0
	local elapsedTime = 0
	local fps = 60

	while true do
		local dt = RunService.RenderStepped:Wait()
		frameCount += 1
		elapsedTime += dt

		if elapsedTime >= 1 then
			fps = frameCount
			frameCount = 0
			elapsedTime = 0
		end

		local ping = "..."
		local success, perfStats = pcall(function()
			return Stats:FindFirstChild("PerformanceStats")
		end)

		if success and perfStats then
			local pingStat = perfStats:FindFirstChild("Ping")
			if pingStat then
				ping = math.floor(tonumber(pingStat:GetValue())) .. "ms"
			end
		end

		local hue = (tick() % 5) / 5
		statsLabel.TextColor3 = Color3.fromHSV(hue, 1, 1)
		statsLabel.Text = "FPS: " .. fps .. " | Ping: " .. ping
	end
end)

-- Category Tabs
local function createCategoryTab(name, position)
	local tab = Instance.new("Frame", screenGui)
	tab.Name = name .. "Tab"
	tab.Size = UDim2.new(0, 200, 0, 200)
	tab.Position = position
	tab.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	tab.Visible = true
	return tab
end

local playerTab = createCategoryTab("Player", UDim2.new(0.5, -310, 0.5, -100))
local visualTab = createCategoryTab("Visual", UDim2.new(0.5, -100, 0.5, -100))
local audioTab = createCategoryTab("Audio", UDim2.new(0.5, 110, 0.5, -100))

-- Player Tab Buttons
local function createButton(parent, name, posY, callback)
	local button = Instance.new("TextButton", parent)
	button.Size = UDim2.new(1, -10, 0, 30)
	button.Position = UDim2.new(0, 5, 0, posY)
	button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.SourceSansBold
	button.TextSize = 16
	button.Text = name
	button.MouseButton1Click:Connect(callback)
	return button
end

createButton(playerTab, "Speed", 10, function()
	humanoid.WalkSpeed = 100
end)

createButton(playerTab, "God Mode", 50, function()
	humanoid.MaxHealth = math.huge
	humanoid.Health = math.huge
end)

createButton(playerTab, "Helicopter", 90, function()
	local bodyVel = Instance.new("BodyVelocity")
	bodyVel.MaxForce = Vector3.new(1e5, 1e5, 1e5)
	bodyVel.Velocity = Vector3.new(0, 50, 0)
	bodyVel.Parent = rootPart
end)

-- Visual Tab Button
createButton(visualTab, "ESP", 10, function()
	for _, plr in pairs(game.Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local billboard = Instance.new("BillboardGui", plr.Character.HumanoidRootPart)
			billboard.Size = UDim2.new(0, 100, 0, 40)
			billboard.Adornee = plr.Character.HumanoidRootPart
			billboard.AlwaysOnTop = true

			local nameTag = Instance.new("TextLabel", billboard)
			nameTag.Size = UDim2.new(1, 0, 1, 0)
			nameTag.BackgroundTransparency = 1
			nameTag.Text = plr.Name
			nameTag.TextColor3 = Color3.new(1, 0, 0)
			nameTag.TextScaled = true
		end
	end
end)

-- Audio Tab Button
createButton(audioTab, "Play Music", 10, function()
	local sound = Instance.new("Sound", player.Character)
	sound.SoundId = "rbxassetid://142376088" -- Replace with your audio ID
	sound.Looped = true
	sound:Play()
end)
