-- Load the Orion Library
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- Create the main UI window
local Window = OrionLib:MakeWindow({
    Name = "Universal Orion Hub",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "UniversalOrionHub",
    IntroText = "Welcome to Universal Orion Hub!",
    Draggable = true
})

-- Player Tab
local PlayerTab = Window:MakeTab({
    Name = "Player",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Player Section
local PlayerSection = PlayerTab:AddSection({Name = "Player Modifications"})

-- WalkSpeed Slider
PlayerSection:AddSlider({
    Name = "Walk Speed",
    Min = 16,
    Max = 100,
    Default = 16,
    Color = Color3.fromRGB(0, 255, 0),
    Increment = 1,
    ValueName = "Speed",
    Callback = function(Value)
        local player = game.Players.LocalPlayer
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = Value
        end
    end
})

-- Jump Power Slider
PlayerSection:AddSlider({
    Name = "Jump Power",
    Min = 50,
    Max = 200,
    Default = 50,
    Color = Color3.fromRGB(0, 255, 255),
    Increment = 1,
    ValueName = "Power",
    Callback = function(Value)
        local player = game.Players.LocalPlayer
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.JumpPower = Value
        end
    end
})

-- NoClip Toggle
local noClipEnabled = false
PlayerSection:AddToggle({
    Name = "No Clip",
    Default = false,
    Callback = function(Value)
        noClipEnabled = Value
        local player = game.Players.LocalPlayer
        if player.Character then
            local humanoid = player.Character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid:ChangeState(Value and Enum.HumanoidStateType.Physics or Enum.HumanoidStateType.GettingUp)
            end
        end
    end
})

-- Teleport to Player Dropdown
local players = {}
for _, plr in pairs(game.Players:GetPlayers()) do
    table.insert(players, plr.Name)
end
PlayerSection:AddDropdown({
    Name = "Teleport to Player",
    Default = "Select a player",
    Options = players,
    Callback = function(Value)
        local player = game.Players.LocalPlayer
        local targetPlayer = game.Players:FindFirstChild(Value)
        if player.Character and targetPlayer and targetPlayer.Character then
            player.Character:MoveTo(targetPlayer.Character.HumanoidRootPart.Position)
            OrionLib:MakeNotification({
                Name = "Teleport",
                Content = "Teleported to " .. Value,
                Time = 3
            })
        end
    end
})

-- ESP Tab
local ESPTab = Window:MakeTab({
    Name = "ESP",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- ESP Section
local ESPSection = ESPTab:AddSection({Name = "ESP Controls"})

-- ESP Toggle
local espEnabled = false
ESPSection:AddToggle({
    Name = "Enable ESP",
    Default = false,
    Callback = function(Value)
        espEnabled = Value
        if Value then
            for _, player in pairs(game.Players:GetPlayers()) do
                if player ~= game.Players.LocalPlayer and player.Character then
                    local highlight = Instance.new("Highlight")
                    highlight.Parent = player.Character
                    highlight.FillColor = Color3.fromRGB(255, 0, 0)
                    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                    highlight.Name = "ESPHighlight"
                end
            end
        else
            for _, player in pairs(game.Players:GetPlayers()) do
                if player.Character and player.Character:FindFirstChild("ESPHighlight") then
                    player.Character.ESPHighlight:Destroy()
                end
            end
        end
    end
})

-- Update ESP when players join/leave
game.Players.PlayerAdded:Connect(function(player)
    if espEnabled and player ~= game.Players.LocalPlayer and player.Character then
        local highlight = Instance.new("Highlight")
        highlight.Parent = player.Character
        highlight.FillColor = Color3.fromRGB(255, 0, 0)
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
        highlight.Name = "ESPHighlight"
    end
end)

game.Players.PlayerRemoving:Connect(function(player)
    if player.Character and player.Character:FindFirstChild("ESPHighlight") then
        player.Character.ESPHighlight:Destroy()
    end
end)

-- Misc Tab
local MiscTab = Window:MakeTab({
    Name = "Misc",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Misc Section
local MiscSection = MiscTab:AddSection({Name = "Miscellaneous"})

-- Anti-AFK Button
MiscSection:AddButton({
    Name = "Enable Anti-AFK",
    Callback = function()
        local vu = game:GetService("VirtualUser")
        game:GetService("Players").LocalPlayer.Idled:Connect(function()
            vu:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            wait(1)
            vu:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
        end)
        OrionLib:MakeNotification({
            Name = "Anti-AFK",
            Content = "Anti-AFK enabled!",
            Time = 3
        })
    end
})

-- Destroy UI Button
MiscSection:AddButton({
    Name = "Destroy UI",
    Callback = function()
        OrionLib:Destroy()
    end
})

-- Initialize the Orion Library
OrionLib:Init()

-- Show welcome notification
OrionLib:MakeNotification({
    Name = "Script Loaded",
    Content = "Universal Orion Hub is now active!",
    Image = "rbxassetid://4483345998",
    Time = 5
})
